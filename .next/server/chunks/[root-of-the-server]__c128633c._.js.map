{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/prakashkumar/Sourcecode/Primaryvision/src/app/api/send-quote/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport nodemailer from 'nodemailer';\n\n// Type definition for the expected form data\ninterface QuoteFormData {\n  firstName: string;\n  lastName: string;\n  businessName: string;\n  email: string; // This is the user's email\n  phone: string;\n  typeOfInquiry: string;\n}\n\n// Nodemailer transport configuration for Zoho Mail (Remains the same)\nconst transporter = nodemailer.createTransport({\n  host: 'smtp.zoho.com',\n  port: 465,\n  secure: true,\n  auth: {\n    user: process.env.ZOHO_EMAIL_USER,    // Your verified Zoho email\n    pass: process.env.ZOHO_EMAIL_PASS,    // The App Password\n  },\n});\n\nexport async function POST(request: Request) {\n  if (!process.env.ZOHO_EMAIL_USER || !process.env.RECEIVING_EMAIL) {\n    console.error('Email configuration missing. Check .env.local file.');\n    return NextResponse.json({ message: 'Server configuration error.' }, { status: 500 });\n  }\n\n  try {\n    const data: QuoteFormData = await request.json();\n\n    const { firstName, lastName, businessName, email, phone, typeOfInquiry } = data;\n\n    const mailOptions = {\n      // 1. 'from': MUST be your verified ZOHO email (for authentication)\n      from: process.env.ZOHO_EMAIL_USER, \n      \n      // 2. 'replyTo': Set the customer's email here so you can reply directly to them\n      replyTo: `${firstName} ${lastName} <${email}>`, // e.g., \"John Doe <john.doe@example.com>\"\n      \n      // 3. 'to': The email where you receive the quote\n      to: process.env.RECEIVING_EMAIL, \n      \n      subject: `New Quote Request from ${firstName} ${lastName}`,\n      \n      // ... (Rest of the text and html content remains the same)\n      text: `\n        --- NEW QUOTE REQUEST ---\n        \n        Name: ${firstName} ${lastName}\n        Business Name: ${businessName}\n        Email: ${email}\n        Phone: ${phone}\n        \n        Inquiry Details:\n        ${typeOfInquiry}\n        \n        -------------------------\n      `,\n      \n      html: `\n        <div style=\"font-family: Arial, sans-serif; line-height: 1.6;\">\n          <h2 style=\"color: #333;\">New Quote Request Submitted</h2>\n          <table style=\"width: 100%; border-collapse: collapse;\">\n            <tr><td style=\"padding: 5px 0; font-weight: bold;\">Name:</td><td>${firstName} ${lastName}</td></tr>\n            <tr><td style=\"padding: 5px 0; font-weight: bold;\">Business Name:</td><td>${businessName}</td></tr>\n            <tr><td style=\"padding: 5px 0; font-weight: bold;\">Email:</td><td>${email}</td></tr>\n            <tr><td style=\"padding: 5px 0; font-weight: bold;\">Phone:</td><td>${phone}</td></tr>\n          </table>\n          \n          <h3 style=\"margin-top: 20px; color: #555;\">Inquiry Details:</h3>\n          <p style=\"white-space: pre-wrap; background-color: #f9f9f9; padding: 15px; border-radius: 8px;\">${typeOfInquiry}</p>\n        </div>\n      `,\n    };\n\n    await transporter.sendMail(mailOptions);\n\n    return NextResponse.json({ message: 'Quote successfully sent!' }, { status: 200 });\n  } catch (error) {\n    console.error('Email sending error:', error);\n    return NextResponse.json({ message: 'Failed to send quote request. Please check server logs.' }, { status: 500 });\n  }\n}"],"names":[],"mappings":";;;AAAA;AACA;;;AAYA,sEAAsE;AACtE,MAAM,cAAc,iJAAA,CAAA,UAAU,CAAC,eAAe,CAAC;IAC7C,MAAM;IACN,MAAM;IACN,QAAQ;IACR,MAAM;QACJ,MAAM,QAAQ,GAAG,CAAC,eAAe;QACjC,MAAM,QAAQ,GAAG,CAAC,eAAe;IACnC;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI,CAAC,QAAQ,GAAG,CAAC,eAAe,IAAI,CAAC,QAAQ,GAAG,CAAC,eAAe,EAAE;QAChE,QAAQ,KAAK,CAAC;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACrF;IAEA,IAAI;QACF,MAAM,OAAsB,MAAM,QAAQ,IAAI;QAE9C,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,aAAa,EAAE,GAAG;QAE3E,MAAM,cAAc;YAClB,mEAAmE;YACnE,MAAM,QAAQ,GAAG,CAAC,eAAe;YAEjC,gFAAgF;YAChF,SAAS,GAAG,UAAU,CAAC,EAAE,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC;YAE9C,iDAAiD;YACjD,IAAI,QAAQ,GAAG,CAAC,eAAe;YAE/B,SAAS,CAAC,uBAAuB,EAAE,UAAU,CAAC,EAAE,UAAU;YAE1D,2DAA2D;YAC3D,MAAM,CAAC;;;cAGC,EAAE,UAAU,CAAC,EAAE,SAAS;uBACf,EAAE,aAAa;eACvB,EAAE,MAAM;eACR,EAAE,MAAM;;;QAGf,EAAE,cAAc;;;MAGlB,CAAC;YAED,MAAM,CAAC;;;;6EAIgE,EAAE,UAAU,CAAC,EAAE,SAAS;sFACf,EAAE,aAAa;8EACvB,EAAE,MAAM;8EACR,EAAE,MAAM;;;;0GAIoB,EAAE,cAAc;;MAEpH,CAAC;QACH;QAEA,MAAM,YAAY,QAAQ,CAAC;QAE3B,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA2B,GAAG;YAAE,QAAQ;QAAI;IAClF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA0D,GAAG;YAAE,QAAQ;QAAI;IACjH;AACF","debugId":null}}]
}